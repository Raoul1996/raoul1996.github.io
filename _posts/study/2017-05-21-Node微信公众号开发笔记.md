---
layout: post
title: Node微信公众号开发笔记
category: study
keywords: Node
---
### 微信公众号开发笔记

#### Day1

1. 电脑本地端口转发
    1. ngrok: 外网被墙
    2. tunnel.mobi: 最近已挂
    3. localtunnel: 启动换域名
    4. 在vpn上搭建映射代理服务通道
    5. utralhook:目前已挂
    6. QQ浏览器
    7. [基于 HTTP/2 的 WEB 内网穿透实现](https://imququ.com/post/tunnel-to-localhost-base-on-http2.html)
        1. 现在正在使用需要注意以下几点
            1. 基于nodeJS
            2. 需要在服务端和客户端同时启动pangolin服务
            3. 将服务端的端口启动到79号，因为微信只支持80和443

2. 服务器nginx修改默认端口
    1. 修改 /etc/nginx 下的 conf.d下的config的反向代理 和 site-enable中的default文件中的serve(r)字段。
    2. service nginx restart
    
3. [access_token 在线测试地址](https://mp.weixin.qq.com/debug/cgi-bin/apiinfo?t=index&type=%E5%9F%BA%E7%A1%80%E6%94%AF%E6%8C%81&form=%E8%8E%B7%E5%8F%96access_token%E6%8E%A5%E5%8F%A3%20/token)
4. [测试号申请地址](https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index)
#### Day2
1. 注意 generator 和 async 控制异步的不同。[Koa](http://koa.bootcss.com/) 官网有写，对照代码可以发现
    1. 使用await代替yield关键字。
    2. 不再使用this关键字，统一使用ctx对象。
